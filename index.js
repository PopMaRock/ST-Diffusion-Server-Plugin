(()=>{"use strict";var t={156:function(t,o,e){var n=this&&this.__awaiter||function(t,o,e,n){return new(e||(e=Promise))((function(r,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function d(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var o;t.done?r(t.value):(o=t.value,o instanceof e?o:new e((function(t){t(o)}))).then(s,d)}u((n=n.apply(t,o||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0}),o.info=void 0,o.init=u,o.exit=a;const i=r(e(268)),s="[sillyTavern-sd-plugin]";function d(t){return`Basic ${Buffer.from(`${t}`).toString("base64")}`}function u(t){return n(this,void 0,void 0,(function*(){const o=i.default.json();t.post("/probe",((t,o)=>o.sendStatus(204))),t.post("/ping",o,((t,o)=>n(this,void 0,void 0,(function*(){try{const{message:e}=t.body;return o.json({message:`Pong! ${e}`})}catch(t){return console.error(s,"Request failed",t),o.status(500).send("Internal Server Error")}})))),t.post("/vaes",o,((t,o)=>n(this,void 0,void 0,(function*(){try{const e=new URL(t.body.url);e.pathname="/sdapi/v1/sd-vae";const n=yield fetch(e,{method:"GET",headers:{Authorization:d(t.body.auth)}});if(!n.ok)throw new Error("SD WebUI returned an error.");const r=yield n.json();return o.send(r)}catch(t){return console.log(t),o.sendStatus(500)}})))),t.post("/loras",o,((t,o)=>n(this,void 0,void 0,(function*(){try{const e=new URL(t.body.url);e.pathname="/sdapi/v1/loras";const n=yield fetch(e,{method:"GET",headers:{Authorization:d(t.body.auth)}});if(!n.ok)throw new Error("SD WebUI returned an error.");const r=yield n.json();return o.send(r)}catch(t){return console.log(t),o.sendStatus(500)}})))),t.post("/controlnet/model_list",o,((t,o)=>n(this,void 0,void 0,(function*(){try{const e=new URL(t.body.url);e.pathname="/controlnet/model_list";const n=yield fetch(e,{method:"GET",headers:{Authorization:d(t.body.auth)}});if(!n.ok)throw new Error("SD WebUI returned an error.");const r=yield n.json();return o.send(r)}catch(t){return console.log(t),o.sendStatus(500)}})))),t.post("/controlnet/modules_list",o,((t,o)=>n(this,void 0,void 0,(function*(){try{const e=new URL(t.body.url);e.pathname="/controlnet/module_list";const n=yield fetch(e,{method:"GET",headers:{Authorization:d(t.body.auth)}});if(!n.ok)throw new Error("SD WebUI returned an error.");const r=yield n.json();return o.send(r)}catch(t){return console.log(t),o.sendStatus(500)}})))),t.post("/controlnet/types",o,((t,o)=>n(this,void 0,void 0,(function*(){try{const e=new URL(t.body.url);e.pathname="/controlnet/control_types";const n=yield fetch(e,{method:"GET",headers:{Authorization:d(t.body.auth)}});if(!n.ok)throw new Error("SD WebUI returned an error.");const r=yield n.json();return o.send(r)}catch(t){return console.log(t),o.sendStatus(500)}})))),console.log(s,"Plugin loaded!")}))}function a(){return n(this,void 0,void 0,(function*(){console.log(s,"Plugin exited")}))}o.info={id:"stwebui",name:"Server Plugin for Silly Tavern Alternative SD Plugin",description:"Allows additional SD Forge/A1111 API endpoints to be used"};const c={init:u,exit:a,info:o.info};o.default=c},268:t=>{t.exports=require("body-parser")}},o={},e=function e(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}(156);module.exports=e})();